from yuki ito takayuki subject re what do the bmp format mean in article robertsa andrew l robert write what exactly do the window bitmap format look like i mean how be the datum store width height no of colour bitmap datum i could find anything in th user manual be there any other reference material which would give me thi information from thoma thoma kinsman newsgroup subject creation guide a request keyword dib bmp bitmap file format message-id date dec gmt sender news organization precambiran electronic rochester ny line xref guide to creation of dib image thoma b kinsman precambrian electronic falstaff rd rochester ny thomask copyright march abstract the format of image create for use by m window application be document in the m window programmer reference guide thi guide be intend a a clearify some word of the specification and to put forth a recommendation among the variou alternative please send and revision to me please thank me for write thi on my own time by keep my name with the document thank you for ymy respect thi document copyright by thoma b kinsman if desire a postscript version of thi document be available thi information be free you get more than what you pay for do sue me if i wrong overview the dib image file format be intend to be a device independent bitmap file format what microsoft mean by device independent be unclear to me fmy pixel resolution be support bite bite bite and bite pixel these image be intend for use on do ibm or little-endian system if you be create them on another architecture you will have to byte swap all short and long integer value by convention dib image end in the extension bmp thi be because march they be a super-set of earlier bitmap image file consequently you will sometime hear dib file refer to a bmp file since dib image file be a super-set there be three flavor of dib image o do dib image these be the recommend convention and the form which i will describe how to create they be intend for application run under m window in a do environment o dib image my understand be that these be the flavor of dib image that be use by the presentation manager o old-style bitmap image march difference between flavor the do dib image consist of a bitmapfileheader file header which identify the file a a dib file thi header also gife the total size of the image file and the offset to the image datum a bitmapinfoheader image header which specify the image attribute an optional palette of color use by the image if it exist thi may contain or entry each entry be a window rgbquad structure the image datum itself the dib image consist of the same bitmapfileheader file header which identify the file a a dib file thi header also gife the total size of the image file and the offset to the image datum a bitmapcoreheader image header which specify the image attribute an optional palette of color use by the image again if thi exist it may contain or entry each entry be a window rgbtriple structure the image datum itself the old style image bitmap consist of either a bitmapinfoheader or a bitmapcoreheader which header type be determine by the first long integer dword value an optional color palette thi palette may be compose of either window rgbquad structure if the header wa a bitmapinfoheader or window rgbtriple structure if the header wa a bitmapcoreheader the image datum itself creating dib image file creating a do dib image file consist of several straight forward step the header need to be create and then write to the file these header structure be define in the m include file palette information need to be store for image that be not image the five general step be filling in the bitmapfileheader and the bitmapinfoheader structure the basic image information if the image be a or an image create the color palette of rgbquad calculating the total file size and put thi information in march the bfsize field of the bitmapfileheader calculating the offset to the image datum from the start of the file and put thi in the bfoffbit field of the bitmapfileheader writing to the file the bitmapfileheader the bitmapinfoheader the color palette and the image datum in that order the follow section describe structure in term of microsoft c type define keyword the follow table describe these keyword for those not familiar with microsoft c type-defined keyword in microsoft c typedef mean byte unsigned character word two byte unsigned integer dword fmy byte unsigned integer march the bitmapfileheader thi structure be define in a typedef struct tagbitmapfileheader word bftype dword bfsize word word dword bfoffbit bitmapfileheader the bftype field be the two ascius character and thi serve to identify the file a a dib image file on an intel byte order machine ibm or a compatible thi constant can be form in c a the quantity on an intel system the bfsize field be the total size of the file for my purpose thi field be equal to the size of the bitmapfileheader plu the size of the bitmapinfoheader plu the number of entry in the color palette time the size of a rgbquad plu the number of byte of image datum if the image datum be be write out in an uncompress form thi value can be calculate ahead of time otherwise thi field need to be fill in later both the and the field be alway set to zero the bfoffbit field be set to the offset to the start of the image datum from the start of the file for my purpose thi field should be set to the size of the bitmapfileheader plu the size of the bitmapinfoheader plu the number of entry in the color palette time the size of a rgbquad thi work out because the image datum be write write after the color palette if one exist march the bitmapinfoheader thi structure be define in a typedef struct tagbitmapinfoheader dword bisize dword biwidth dword biheight word biplane word bibitcount dword bicompression dword bisizeimage dword bixpelspermeter dword biypelspermeter dword biclrused dword biclrimportant bitmapinfoheader the bisize field be set to the size of the bitmapinfoheader structure itself when read the image file thi value be what be use to determine that the image contain a bitmapinfoheader and not a bitmapcoreheader the biwidth field be the width of the image in image pixel the biheight field be the height of the image in image line the biplane field should alway be set to thi datum be write out a if there wa one color plane the bibitcount field be the bit-depth of the image thi must be either or depend on the bit-depth of the image datum the bicompression field tell how the image datum be compress if it be compress dib image support two form of run-length encode however i have never see any image which use it and do know yet how it work set thi field to zero long zero or to indicate that the datum be not compress all subsequent field of the bitmapinfoheader structure may be set to zero a requirement of the interpretting software that it be able to compute these field a necessary from the previou information the field which you might want to explicitly specify might be biclrused for and image thi field indicate that not all of the possible color entry be use and that the image contain biclrused color if you be use only color with an image then you may only want to save of the possible palette entry generally set thi field to zero march color palette each entry of a color palette be a rgbquad structure the rgbquad structure be define in the include file a typedef struct tagrgbquad byte rgbblue byte rgbgreen byte rgbred byte rgbreserved rgbquad the rgbreserved field be alway zero for each color use the amount of blue green and red be fill into the structure and the structure be write to the file a value of zero in the rgbblue rgbgreen or rgbred field indicate that that particular component do not contribute to the color composition a value of in any of these field indicate that the component contribute fully to the color composition image datum there be three surprise about the order of image datum in dib image file the creator of thi format wa determine to be creative and certainly wa within the image datum each line write out be pad to the next fmy byte quantity so if you have an image which wa only one pixel wide you still have to write out fmy byte for every image line the number of byte per line can be calculate a or in term of the field of the bitmapinfoheader structure biwidth bibitcount when write out ymy image datum you must write it out bottom line first the bottom line of the image a you would look at it on the screen be the first line of image datum in the file for and image information be write a you would expect one bite image be pad eight pixel to a byte fmy bite image be pad two pixel to a byte eight bite image be write one pixel per byte twenty-fmy bite image be write three byte per pixel however for image the information must be write out in the order blue green red while most image file format write datum out in march an rgb order a dib image file write the datum out in an bgr order summary thi should provide enough information to create dib image from application such a scanner or for image export routine if you find out any more about dib image please pa the information on to me so that i can modify thi document accordingly march thoma b kinsman rochester ny thoma practice random kindnes and senseles act of beauty anon ito takayuki yuki senior department of infomation science faculty of science university of tokyo japan 