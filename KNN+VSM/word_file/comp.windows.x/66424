from dbl david b lewi subject frequently asked question faq archive-name last-modified subject i write a widget and ca use a float a a resource value float resource be not portable the size of the value may be larger than the size of an xtpointer try use a pointer to a float instead the xaw scrollbar float resource be handle in thi way subject is thi a memory leak in the xtdestroywidget ye thi be the unofficial for the thu jul thu jul xconsortium v swick exp plu unofficial patch in revision and copyright by digital equipment corporation maynard massachusett int i destroyrec dr app while i app if dr widget w dr widget if app bcopy char char dr app destroyrec w else i dr int i destroyrec dr while i app can result in call to xtdestroywidget and these could cause app to be reallocate dr app i if dr widget w dr widget if app bcopy char char dr app i sizeof destroyrec w else i from donna converse converse subject are callback guarantee to be call in the order register although some book demonstrate that the current implementation of xt happen to call callback procedure in the order in which they be register the specification do not guarantee such a sequence and supplemental authoritative document the volume do say that the order be undefined because the callback list can be manipulate by both the widget and the application xt can not guarantee the order of execution in general the callback procedure should be think of a operate independently of one another and should not depend on side-effect of other callback operate if a seqence be need then the single callback to be register can explicitly call other function necessary thank to converse subject why do xtdestroywidget actually destroy the widget xtdestroywidget operate in two pas in order to avoid leave dangle datum structure the function-call mark the widget which be not actually destroy until ymy program return to it event-loop subject how do i query the user synchronously use xt it be possible to have code which look like thi trivial callback which ha a clear flow of control the call to askuser block until answer be set to one of the valid value if it be not a ye answer the code drop out of the callback and back to an event-processing loop void quit widget w xtpointer client xtpointer call int answer answer askuser w really quit if answer answer askuser w are you really positive if answer exit a more realistic example might ask whether to create a file or whether to overwrite it thi be accomplish by enter a second event-processing loop and wait until the user answer the question the answer be return to the call function that function askuser look something like thi where the motif can be replace with widget-set-specific code to create some sort of dialog-box display the question string and button for ok cancel and help or equivalent int askuser w string widget w char string int some not-used marker widget dialog could cache carry but arg arg int n xtappcontext context xtsetarg arg n xmnmessagestring xmstringcreateltor string n xtsetarg arg n xmndialogstyle n dialog xmcreatequestiondialog xtparent w string arg n xtaddcallback dialog xmnokcallback response answer xtaddcallback dialog xmncancelcallback response answer xtaddcallback dialog xmnhelpcallback response answer xtmanagechild dialog context xtwidgettoapplicationcontext w while answer xtapppending context xtappprocessevent context xtimall xtdestroywidget dialog blow away the dialog box and shell return answer the dialog support three button which be set to call the same function when tickle by the user the variable answer be set when the user finally select one of those choice void response w client call widget w xtpointer client xtpointer call int answer int client xmanycallbackstruct reason xmanycallbackstruct call switch reason reason case answer some define value break case answer break case answer break default return and the code unwrap back to the point at which an answer wa need and continue from there thank to dan heller argv further code be in dan widgetwrap library subject how do i determine the name of an exist widget i have a widget id and need to know what the name of that widget be user of and later be best off use the xtname function which will work on both widget and non-widget object if you be still use you can use thi simple bite of code to do what you want note that it depend on the widget internal datum structure and be not necessarily portable to future version of xt include include include string xtname widget widget widget will work with non-widget object return xrmnametostring widget modify with suggestion by larry roger larry subject why do i get a baddrawable error draw to xtwindow widget i do thi in order to get a window into which i can do xlib graphic within my xt-based program canva xtcreatemanagedwidget widgetclas draw area window xtwindow canva get the window associate with the widget xdrawline window produce error the window associate with the widget be create a a part of the realization of the widget using a window id of null no window could create the error that you describe it be necessary to call xtrealizewidget before attempt to use the window associate with a widget note that the window will be create after the xtrealizewidget call but that the server may not have actually map it yet so you should also wait for an expose event on the window before draw into it subject why do i get a badmatch error when call xgetimage the badmatch error can occur if the specify rectangle go off the edge of the screen if you do want to catch the error and deal with it you can take the follow step to avoid the error make a pixmap the same size a the rectangle you want to capture clear the pixmap to background use xfillrectangle use xcopyarea to copy the window to the pixmap if you get a noexpose event the copy wa clean use xgetimage to grab the image from the pixmap if you get one or more graphicsexpose event the copy wa clean and the member of the graphicsexpose event structure tell you the part of the pixmap which be good get rid of the pixmap it probably take a lot of memory thank to oliver jone oj subject how can my application tell if it be be run under x a number of program offer x mode but otherwise run in a straight character-only mode the easiest way for an application to determine that it be run on an x display be to attempt to open a connection to the x server display xopendisplay if display do x stuff else do curse or something else where be either the string specify on the command-line follow display by convention or otherwise be char null in which case xopendisplay use the value of display if set thi be superior to simply check for the existence a display command-line argument or check for display set in the environment neither of which be adequate subject how do i make a busy cursor while my application be compute is it necessary to call xdefinecursor for every window in my application the easiest thing to do be to create a single inputonly window that be a large a the largest possible screen make it a child of ymy toplevel window and it will be clip to that window so it wo affect any other application it need to be a big a the largest possible screen in case the user enlarge the window while it be busy or move elsewhere within a virtual desktop substitute toplevel with ymy top-most widget here similar code should work for xlib-only application just use ymy top window unsigned long valuemask xsetwindowattribute attribute ignore device event while the busy cursor be display valuemask cwdontpropagate cwcursor keypressmask keyreleasemask buttonpressmask buttonreleasemask pointermotionmask xcreatefontcursor xtdisplay toplevel the window will be a big a the display screen and clip by it own parent window so we never have to worry about resize xcreatewindow xtdisplay toplevel xtwindow toplevel unsigned int inputonly copyfromparent valuemask attribute where the maximum size above could be replace by the real size of the screen particularly to avoid server which have problem with window larger than when you want to use thi busy cursor map and raise thi window to go back to normal unmap it thi will automatically keep you from get extra mouse event depend on precisely how the window manager work it may or may not have a similar effect on keystroke a well in addition note also that most of the xaw widget support an xtncursor resource which can be temporarily reset should you merely wish to change the cursor without block pointer event thank to andrew wason aw dan heller argv and mouse subject how do i fork without hang my parent x program an x-based application which spawn off other unix process which continue to run after it be close typically do not vanish until all of it child be terminate the child inherit from the parent the open x connection to the display what you need to do be fork then immediately in the child proces close connectionnumber xtdisplay widget to close the file-descriptor in the display information after thi do ymy exec you will then be able to exit the parent alternatively before make thi call which cause the file descriptor to be close on exec void fcntl connectionnumber xdisplay thank to janet anstett anstettj gordon freedman greg holmberg holmberg subject can i make xt or xlib call from a signal handler no xlib and xt have no mutual exclusion for protect critical section if ymy signal handler make such a call at the wrong time which might be while the function you be call be already execute it can leave the library in an inconsistent state note that the ansi c standard point out that behavior of a signal handler be undefined if the signal handler call any function other than signal itself so thi be not a problem specific to xlib and xt the posix specification mention other function which may be call safely but it may not be assume that these function be call by xlib or xt function you can work around the problem by set a flag in the interrupt handler and later check it with a work procedure or a timer event which ha previously be add note the article in the x journal and the example in volume be in error thank to pete ware ware and donna converse converse subject what be these xlib sequence lose error you may see these error if you issue xlib request from an xlib error handler or more likely if you make call which generate x request to xt or xlib from a signal handler which you should be do in any case subject how can my xt program handle socket pipe or file input it very common to need to write an xt program that can accept input both from a user vium the x connection and from some other file descriptor but which operate efficiently and without block on either the x connection or the other file descriptor a solution be use xtappaddinput after you open ymy file descriptor use xtappaddinput to register an input handler the input handler will be call every time there be something on the file descriptor require ymy program attention write the input handler like you would any other xt callback so it do it work quickly and return it be important to use only non-blocking system call in ymy input handler most input handler read the file descriptor although you can have an input handler write or handle exception condition if you wish be careful when you register an input handler to read from a disk file you will find that the function be call even when there be input pending xtappaddinput be actually work a it be suppose to the input handler be call whenever the file descriptor be ready to be read not only when there be new datum to be read a disk file unlike a pipe or socket be almost alway ready to be read however if only because you can spin back to the begin and read datum you read before the result be that ymy function will almost alway be call every time around xtappmainloop there be a way to get the type of interaction you be expect add thi line to the begin of ymy function to test whether there be new datum if ioctl fd fionread n n return but because thi be call frequently ymy application be effectively in a busy-wait you may be better off not use xtappaddinput and instead set a timer and in the timer procedure check the file for input courtesy dan heller argv mouse ollie jone oj subject how do i simulate a button event for a widget you can do thi use xsendevent it likely that you not set the window field in the event which xt need in order to match to the widget which should receive the event if you send event to ymy own application then you can use xtdispatchevent instead thi be more efficient than xsendevent in that you avoid a round-trip to the server depending on how well the widget wa write you may be able to call it action procedure in order to get the effect you want courtesy mark a horstman subject why do anything appear when i run thi simple program xcreatesimplewindow blackpixel whitepixel xselectinput buttonreleasemask xmapwindow xdrawline you be right to map the window before draw into it however the window be not ready to be draw into until it actually appear on the screen until ymy application receife an expose event drawing do before that will generally not appear you see code like thi in many program thi code would appear after window wa create and map while do xnextevent switch case expose on expose event redraw xdrawline break note that there be a second problem some xlib implementation do set up the default graphic context to have correct color so thi program could previously include thi code xcreategc note the code use blackpixel and whitepixel to avoid assume that be black and be white or vice-versa the relationship between pixel and and the color black and white be implementation-dependent they may be reverse or they may not even correspond to black and white at all also note that actually use blackpixel and whitepixel be usually the wrong thing to do in a finish program a it ignore the user preference for foreground and background and also note that you can run into the same situation in an xt-based program if you draw into the xtwindow w right after it ha be realize it may not yet have appear subject what be the difference between a screen and a screen the be an xlib structure which include the information about one of the monitor or virtual monitor which a single x display support a server can support several independent screen they be number etc the or be the second digit the which can be think of a an index into the array of available screen on thi particular display connection the macro which you can use to obtain information about the particular screen on which ymy application be run typically have two form one which take a screen and one with take both the display and the in xt-based program you typically use xtscreen widget to determine the screen on which ymy application be run if it use a single screen part of the confusion may arise from the fact that some of the macro which return characteristic of the screen have display in the name xdisplaywidth xdisplayheight etc subject can i use c with motif xview the header file be compatible with c the motif header file be usable a be inside extern c however the definition of string in can conflict with the libg or other string clas and need to be work around some other project which can help wwl a set of c class by jean-daniel fekete to wrap x toolkit widget available vium anonymou ftp from a or a it work by build a set of c class in parallel to the clas tree of the widget the c interview toolkit be obtainable vium anonymou ftp from interview use a model similar to that of tex for construct user interface and support multiple look on the user interface some of it sample application include a wysiwig document editor doc a macdraw-like draw program idraw and an interface builder ibuild thing a clas library write at the rome air force base by the strategic air command available a freeware on archive site motif be a public-domain library that define c clas wrapper for motif it add an application clas for initialize x and also integrate wcl and the xba widget set thi work wa develop by ronald van loon rvloon base on x a set of bind do by the university of lowell graphic research laboratory the current source be available from a the source code example for doug young object-oriented programming with c and isbn do not include widget wrapper but do include a set of class that encapsulate higher-level facility commonly need by motif or other xt-based application check export in rogue wave offer for c programmer use motif info or a product call commonview by glockenspiel ltd ireland apparently be a toolkit for multiple window system include pm window and xv be sell by qualix fax it implement an interface from the gil file that sun openwindow developer guide produce to xview wrapper class in c uit be a set of c class embed the xview toolkit it be intend for use with sun openwindow developer guide builder tool source be on a version wa release also of likely use be objectcenter saber-c and a reasonable alternative to all of the above be parcplace formerly solbourne object interface thank to dougla s rand dsrand and george wu gwu subject where can i obtain alternate language bind to x version of the clx lisp bind be part of the core source distribution a version of clx be on the tape version be on in the saic bind be through anonymou ftp in pub from there be an study team sponsor by nasa jsc which apparently be work out bind information xada gnu smalltalk ha a betum native smalltalk bind to x call stix by it be still in it begin stage and documentation be sparse outside the smalltalk code itself the source be available a on or prolog bind call xwip write by ted kim at ucla while support in part by darpa be available by anonymou ftp from or these prolog language bind depend on have a quintus-type foreign function interface in ymy prolog the developer ha get it to work with quintu and sicstu prolog inquiry should go to xwip scheme bind to xlib and xaw be part of the elk distribution version on export obsolete the version on the contrib tape x-scm a bolt-on accessory for aubrey jaffer scm scheme interpreter that provide an interface to xlib motif and openlook be now available vium ftp from and ada bind to motif explicitly will eventually be make available by the jet propulsion laboratory probably through the normal electronic mean advance information can be obtain from dsoulele who may respond a time permit adamotif be a complete bind to x and motif for the ada language for many common system it be base in part upon the bind and also include a uil to ada translator info system engineering research corporation well serc also the mit consortium although not involve in produce ada bind for x maintain a partial list of person involve in x and ada information be available from donna converse converse subject can xgetwindowattribute get a window background no once set the background pixel or pixmap of a window can not be re-read by client the reason for thi be that a client can create a pixmap set it to be the background pixmap of a window and then free the pixmap the window keep thi background but the pixmap itself be destroy if you sure a window ha a background pixel not a pixmap you can use xcleararea to clear a region to the background color and then use xgetimage to read back that pixel however thi action alter the content of the window and it suffer from race condition with exposure courtesy dave lemke of ncd and stuart mark of sun note that the same apply to the border thi be a mi feature of the protocol which allow the server be free to manipulate the however it want by not require the server to keep the original pixel or pixmap some potentially a lot of space can be save courtesy jim fulton mit x consortium subject how do i create a transparent window a completely transparent window be easy to get use an inputonly window in order to create a window which be mostly transparent you have several choice the shape extension first release with offer an easy way to make non-rectangular window so you can set the shape of the window to fit the area where the window should be nontransparent however not all server support the extension a machine-specific method of implement transparent window for particular server be to use an overlay plane support by the hardware note that there be no x notion of a transparent color index a generally portable solution be to use a large number of tiny window but thi make operate on the application a a unit difficult a final answer be to consider whether you really need a transparent window or if you would be satisfy with be able to overlay ymy application window with information if so you can draw into separate bitplane in color that will appear properly thank to der mouse mouse see also the x journal for a more complete answer include code sample for thi last option subject why do gxxor produce mathematically-correct color value when use gxxor you may expect that draw with a value of black on a background of black for example should produce white however the draw operation do not work on rgb value but on colormap index the color that the result colormap index actually point to be undefined and visually random unles you have actually fill it in yourself on many x server black and white often or program take advantage of thi mathematical coincidence will break if you want to be combine color with gxxor then you should be allocate a number of ymy own color cell and fill them with ymy choose pre-computed value if you want to use gxxor simply to switch between two color then you can take the shortcut of set the background color in the gc graphic context to and the foreground color to a value such that when it draw over red say the result be blue and when it draw over blue the result be red thi foreground value be itself the xor of the colormap index of red and blue thank to chri flatter cflatter and ken whaley whaley subject why do every color i allocate show up a black make sure you use bite and not the red green and blue field of an xcolor structure be scale so that be nothing and be full-blast if you forget to scale use for example for each color the xalloccolor function will perform correctly but the result color be usually black thank to paul asente asente subject why ca my program get a standard colormap i have an image-processing program which use xgetrgbcolormap to get the standard colormap but it do work xgetrgbcolormap when use with the property do not create a standard colormap it just return one if one already exist use xstdcmap or do what it do in order to create the standard colormap first from der mouse mouse subject why do the pixmap i copy to the screen show up a garbage the initial content of pixmap be undefined thi mean that most server will allocate the memory and leave around whatever happen to be there which be usually garbage you probably want to clear the pixmap first use xfillrectangle with a function of gxcopy and a foreground pixel of whatever color you want a ymy background or if you be use the pixmap a a mask courtesy dave lemke of ncd and stuart mark of sun subject how do i check whether a window id be valid my program ha the id of a window on a remote display i want to check whether the window exist before do anything with it because x be asynchronou there be a guarantee that the window would still exist between the time that you get the id and the time you send an event to the window or otherwise manipulate it what you should do be send the event without check but install an error handler to catch any badwindow error which would indicate that the window no longer exist thi scheme will work except on the rare occasion that the original window ha be destroy and it id reallocate to another window courtesy ken lee klee subject can i have two application draw to the same window ye the x server assign id to window and other resource actually the server assign some bite the client other and any application that know the id can manipulate the resource almost any x server resource except for gc and private color cell can be share the problem you face be how to disseminate the window id to multiple application a simple way to handle thi and which solf the problem of the application run on different machine be in the first application to create a specially-named property on the root-window and put the window id into it the second application then retrieve the property whose name it also know and then can draw whatever it want into the window note thi scheme work iff there be only one instance of the first application run and the scheme be subject to the limitation mention in the question about use window id on remote display note also that you will still need to coordinate any higher-level cooperation among ymy application note also that two process can share a window but should not try to use the same server connection if one proces be a child of the other it should close down the connection to the server and open it own connection mostly courtesy phil karlton karlton subject why ca my program work with tvtwm or swm a number of application include xwd xwininfo and xsetroot do not handle the virtual root window which tvtwm and swm use they typically return the wrong child of root a general solution be to add thi code or to use it in ymy own application where you would normally use rootwindow dpy screen function name getvroot description get the root window even if it a virtual root argument the display and the screen return the root window for the client include window getvroot dpy scr display dpy int scr window rootreturn parentreturn child unsigned int numchild window root rootwindow dpy scr atom none int i xinternatom dpy false xquerytree dpy root rootreturn parentreturn child numchild for i i numchild i atom int long nitem bytesafter window newroot null if xgetwindowproperty dpy child i false nitem bytesafter unsigned char newroot succes newroot root newroot break return root courtesy david elliott dce similar code be in ssetroot a version of xsetroot distribute with tvtwm a header file by andrea stolcke of icsi on function similarly by provide macro for rootwindow and defaultrootwindow code can include thi header file first to run properly in the presence of a virtual desktop subject how do i keep a window from be resize by the user resizing the window be do through the window manager window manager can pay attention to the size hint ymy application place on the window but there be no guarantee that the window manager will listen you can try set the minimum and maximum size hint to ymy target size and hope for the best subject how do i keep a window in the foreground at all time it rather antisocial for an application to constantly raise itself by track visibilitynotify event so that it be overlap imagine the conflict between two such program run the only sure way to have ymy window appear on the top of the stack be to make the window override-redirect thi mean that you be temporarily assume window-management duty while the window be up so you want to do thi infrequently and then only for short period of time for popup menu or other short parameter-setting window thank to der mouse mouse subject how do i make text and bitmap blink in x there be no easy way unles you will to depend on some sort of extension a yet non-existent you have to arrange for the blink yourself either by redrawing the content periodically or if possible by play game with the colormap and change the color of the content thank to mouse der mouse subject how do i get a double-click in xlib user of xt have the support of the translation manager to help get notification of double-clicking there be no good way to get only a double-click in xlib because the protocol do not provide enough support to do double-click you have to do client-side timeout unles the single-click action be such that you can defer actually take it until you next see an event from the server thu you have to do timeout which mean system-dependent code on most unixish implementation you can use xconnectionnumber to get the file descriptor of the x connection and then use select or something similar on that note that many user-interface reference suggest that a double-click be use to extend the action indicate by a single-click if thi be the case in ymy interface then you can execute the first action and a a compromise check the timestamp on the second event to determine whether it too should be the single-click action or the double-click action thank to mouse der mouse subject how do i render rotate text xlib intentionally do not provide such sophisticate graphic capability leave them up to server-extension or clients-side graphic library ymy only choice if you want to stay within the core x protocol be to render the text into a pixmap read it back vium xgetimage rotate it by hand with whatever matrix you want and put it back to the server vium xputimage more specifically create a bitmap b and write ymy text to it create an xybitmap image i from b vium xgetimage create an xybitmap image big enough to handle the transformation for each x y in x y i a b where a x co thetum y sin thetum b x sin thetum y co thetum render note that you should be careful how you implement thi not to lose bite an algorithm base on shear transformation may in fact be better the high-level server-extension and graphic package available for x also permit render of rotate text display postscript pex phig and gk although most be not capable of arbitrary rotation and probably do not use the same font that would be find on a printer in addition if you have enough acces to the server to install a font on it you can create a font which consist of letter rotate at some predefined angle ymy application can then itself figure out placement of each glyph courtesy der mouse mouse eric taylor etaylor and ken lee klee liam quin lee interview c ui toolkit in the x contrib software ha support for render rotate font in x it could be one source of example code brian r smith brsmith another possibility be to use the hershey font they be stroke-rendered and can be use by x by convert them into xdrawline request eric the xrotfont program by alan richardson post to july paint a rotate font by implement the method above and by use an outline hershey font the xvertext package by alan richardson be a set of function to facilitate the write of text at any angle version wa recently release to and it be also on export a x resource volume include information from hp about modification to the x font server which provide for rotate and scale text subject what be the x registry how do i reserve name there be place in the x toolkit in application and in the x protocol that define and use string name the context be such that conflict be possible if different component use the same name for different thing the mit x consortium maintain a registry of name in these domain orgainization name selection name selection target resource type application class and clas extension record type and several other the list a of be in the directory on the tape it be also available by send send doc registry to the xstuff mail server to register name first come first serve or to ask question send to xregistry be sure to include a postal addres for confirmation condense from appendix h david b lewi faq craft just the faq joe friday david b lewi temporarily at but not speak for visual inc day dbl even david craft 