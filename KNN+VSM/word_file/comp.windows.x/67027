from yang hong yang subject colormap question hi expert i kind of new to x the follow question be strange to me i be try to modify the content of the colormap but fail without reason to me i be use the follow piece of code toplevel xtinitialize argv testcolor null argc argv dpy xtdisplay toplevel scr defaultscreen dpy defaultcolormap dpy scr if xalloccolorcell dpy true null cell cell dored dogreen doblue xstorecolor dpy color printf n try to allocate the color d a d d d xquerycolor dpy color printf n after allocate the color d be d d d else printf n error could allocate color cell running output try to allocate the color a after allocate the color be after xstorecolor xquerycolor just return the original value no display but the content of colormap be obviou unchanged i also try to draw a line use the color but it turn out to be the unmodified color so what be my problem how to modify the content of the colormap any will be appreciate please send mail to yang william email yang by the way the follow be the environment i be use output of xdpyinfo it show the default visual be pseudocolor version number vendor string decwindow digitalequipmentcorporation vendor release number maximum request size longword byte motion buffer size bitmap unit bite order pad lsbfirst image byte order lsbfirst number of support pixmap format support pixmap format depth depth keycode range minimum maximum number of extension adobe-dps-extension dpsextension shape mit-shm multi-buffering xinputextension mit-sundry-nonstandard dec-xtrap default screen number number of screen screen dimension pixel millimeter resolution dot per inch depth root window id depth of root window plane number of colormap minimum maximum default colormap default number of colormap cell preallocated pixel black white option backing-store ye save-under ye current input event mask keypressmask buttonpressmask buttonreleasemask enterwindowmask substructureredirectmask propertychangemask colormapchangemask number of visual default visual id visual visual id clas pseudocolor depth plane size of colormap entry red green blue mask significant bite in color specification bite visual visual id clas grayscale depth plane size of colormap entry red green blue mask significant bite in color specification bite visual visual id clas staticgray depth plane size of colormap entry red green blue mask significant bite in color specification bite visual visual id clas staticcolor depth plane size of colormap entry red green blue mask significant bite in color specification bite visual visual id clas truecolor depth plane size of colormap entry red green blue mask significant bite in color specification bite number of mono multibuffer type visual id max buffer depth visual id max buffer depth visual id max buffer depth visual id max buffer depth visual id max buffer depth number of stereo multibuffer type 