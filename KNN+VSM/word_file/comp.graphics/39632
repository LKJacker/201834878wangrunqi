from graeme graeme gill subject re gamma correction in article madler mark adler write can someone who know what they talk about add a faq entry on gamma correction thank i get regular question about gamma correction since i go to great pain to deal with it properly in xli the image loader program i maintain here be an explanation i often use to answer these question thi might be suitable for inclusion in the faq graeme gill a note on gamma correction and image author graeme w gill graeme date what be all thi gamma stuff anyway although it would be nice to think that an image be an image there be a lot of complication not only be there a whole bunch of different image format gif jpeg tiff etc etc there be a whole lot of other technical stuff that make deal with image a bite complicate gamma be one of those thing if you ever download image from bb or the net you probably notice with most image view program that some image look ok some look too dark and some look too light why be thi you may ask thi be gamma correction or the lack of it why do we need gamma correction at all gamma correction be need because of the nature of crt cathode ray tube the monitor usually use for view image if you have some sort of real live scene and turn it into a computer image by measure the amount of light come from each point of the scene then you have create a linear or un-gamma-corrected image thi be a good thing in many way because you can manipulate the image a if the value in the image file be light ie add and multiply will work just like real light in the real world now if you take the image file and turn each pixel value into a voltage and fee it into a crt you find that the crt give you an amount of light proportional to the voltage the amount of light come from the phosphor in the screen depend on the the voltage something like thi voltage so if you just dump ymy nice linear image out to a crt the image will look much too dark to fix thi up you have to gamma correct the image first you need to do the opposite of what the crt will do to the image so that thing cancel out and you get what you want so you have to do thi to ymy image image for most crt the be somewhere between and if that be all it be why do it seem so complicate the problem be that not all display program do gamma correction also not all source of image give you linear image video camera or video signal in general because of thi a lot of image already have some gamma correction do to them and you be rarely sure how much if you try and display one of those image with a program that do gamma correction for you the image get correct twice and look way to light if you display one of those image with a program that do do gamma correction then it will look vaguely right but not perfect because the gamma correction be not exactly right for you particular crt whose fault be all thi it be really three thing one be all those display program out there that do do gamma correction properly another be that most image format do specify a standard gamma or do have some way or record what their gamma correction be the third thing be that not many person understand what gamma correction be all about and create a lot of image with vary gamma at least two file format do the right thing the utah graphic toolkit rle format ha a semi-standard way of record the gamma of an image the jfif file standard that use jpeg compression specify that the image to be encode must have a gamma of ie a linear image but not everyone obey the rule some image loader for instance xli an image utility allow you to specify not only the gamma of the monitor you be use but the individual gamma value of image you be try to view other image viewer eg xv another image program and utility eg the pbm toolkit provide way of change the gamma of an image but you have to figure out the overall gamma correction yourself allow for undo any gamma correction the image ha and then the gamma correction you need to suite ymy crt monitor note that xv do provide an easy way of modify the gamma of an image you need to adjust the r g and b curf to the appropriate gamma in the coledit control altering the intensity in the hsv control do do the right thing a it fail to take account of the effect gamma ha on h and s thi tend to give a tint to the image how can i figure out what my viewer do or what gamma my screen ha the simplest way to do that be to try load the file provide with xli distribution which be a jfif jpeg format file contain two grayscale ramp the ramp be choose to look linear to the human eye one use continuou tone and the other use dither if ymy viewer do the right thing and gamma correct image then the two ramp should look symmetrical and the point at which they look equally bright should be almost exactly half way from the top to the bottom to find thi point it help if you move away a little from the screen and de-focu ymy eye a bite if ymy viewer do do gamma correction then leave hand ramp will have a long dark part and a short white part and the point of equal brightnes will be above the center if ymy viewer do have a way of set the right amount of gamma correction for a display then if the equal brightnes point be above center increase the gamma and decrease it if it be below the center the value will usually be around with xli for instance you can adjust the display gamma with the dispgamma flag and once you get it right you can set the environment variable in ymy profile how do i figure out what the gamma of an image be thi be the most tricky bite a a general rule it seem that a lot of true color ie bite ppm jpg image have a gamma of linear although there be many about that have some gamma correction it seem that the majority of pseudo color image ie bite image with color map gif etc be gamma correct to some degree or other if ymy viewer do gamma correction then linear image will look good and gamma correct image will look too light if ymy viewer do do gamma correction then linear image will look too dark and gamma correct image will ok why linear image be sometime not such a good thing one of the reason that many high quality format such a video use gamma correction be that it actually make better use of the storage medium thi be because the human eye ha a logarithmic response to light and gamma correction ha a similar compression characteristic thi mean image could make better use of bite per color for instance if they use gamma correction the implication though be that every time you want to do any image process you should convert the bite image to or so linear bite to retain the same accuracy since little popular software do thi and none of the popular image format can agree on a standard gamma correction factor it be difficult to justify gamma correct image at the popular level if some image format can standardize on a particular gamma and if image manipulation software take care to use extra precision when deal with linearize internal datum then gamma correct distribution of image would be a good thing i be tell that the kodak photocd format for instance ha a standard gamma correction factor that enable it to get the highest quality out of the bite use to hold the image 